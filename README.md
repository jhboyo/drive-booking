# ê°•í™”í•™ìŠµ í”„ë¡œì íŠ¸: ìë™ì°¨ ì‹œìŠ¹ ì˜ˆì•½ í†µí•© ì‹œìŠ¤í…œ

> **Interactive Conversational Recommendation System using Reinforcement Learning**

---

## ğŸ’¡ ì—°êµ¬ ë™ê¸°

### "20 Questions" ê²Œì„ì—ì„œ ìë™ì°¨ ì—…ë¬´ ë„ë©”ì¸ìœ¼ë¡œ

ë³¸ í”„ë¡œì íŠ¸ëŠ” EMNLP 2018ì— ë°œí‘œëœ **"Playing 20 Question Game with Policy-Based Reinforcement Learning"** (Hu et al., 2018)[arXiv:1808.07645](https://arxiv.org/abs/1808.07645) ë…¼ë¬¸ì—ì„œ ì˜ê°ì„ ë°›ì•„, í•™ìˆ ì  ê²Œì„ í™˜ê²½ì˜ ê°•í™”í•™ìŠµ ê¸°ë²•ì„ **ì‹¤ì œ ìë™ì°¨ ì—…ë¬´ ë„ë©”ì¸ì— ì ìš©**í•œ ì—°êµ¬ì„.

#### ì› ë…¼ë¬¸ì˜ í•µì‹¬ ì•„ì´ë””ì–´

| êµ¬ë¶„ | 20 Questions ê²Œì„ |
|------|-------------------|
| **ëª©í‘œ** | ìµœëŒ€ 20ê°œ ì§ˆë¬¸ìœ¼ë¡œ ì‚¬ìš©ìê°€ ìƒê°í•œ ë¬¼ì²´(ìœ ëª…ì¸, ë™ë¬¼ ë“±) ë§ì¶”ê¸° |
| **ë°©ë²•** | ì •ì±… ê¸°ë°˜ ê°•í™”í•™ìŠµìœ¼ë¡œ ìµœì ì˜ ì§ˆë¬¸ ì„ íƒ ì •ì±… í•™ìŠµ |
| **í•µì‹¬ ê¸°ì—¬** | ë…¸ì´ì¦ˆ ìˆëŠ” ë‹µë³€ì— ê°•ê±´, ê°ì²´ ë°ì´í„°ë² ì´ìŠ¤ ì˜ì¡´ì„± ì œê±° |

#### ë³¸ í”„ë¡œì íŠ¸ì˜ í™•ì¥

ì› ë…¼ë¬¸ì˜ "ì§ˆë¬¸ì„ í†µí•œ ì •ë³´ ìˆ˜ì§‘ â†’ ìµœì¢… ì¶”ë¡ " í”„ë ˆì„ì›Œí¬ë¥¼ **ìë™ì°¨ ì‹œìŠ¹ ì˜ˆì•½ ë„ë©”ì¸**ì— í™•ì¥ ì ìš©í•¨:

| êµ¬ë¶„ | 20 Questions ê²Œì„ | ì‹œìŠ¹ ì˜ˆì•½ ì‹œìŠ¤í…œ (ë³¸ í”„ë¡œì íŠ¸) |
|------|-------------------|-------------------------------|
| **í™˜ê²½** | ê²Œì„ í™˜ê²½ | ì‹¤ì œ ì—…ë¬´ í™˜ê²½ (ì°¨ëŸ‰ DB, ì„¼í„° ìŠ¤ì¼€ì¤„) |
| **ëª©í‘œ** | ë¬¼ì²´ ë§ì¶”ê¸° | ìµœì  ì°¨ëŸ‰ ì¶”ì²œ + ì¼ì • ë°°ì • |
| **ì§ˆë¬¸ ìˆ˜** | ìµœëŒ€ 20ê°œ | **í•„ìˆ˜ 4ê°œ + ì„ íƒ 4ê°œ** (íš¨ìœ¨ì„± ê°•ì¡°) |
| **ë³´ìƒ** | ì •ë‹µ ì—¬ë¶€ | ê³ ê° ë§Œì¡±ë„ + ì˜ˆì•½ ì„±ì‚¬ - ì§ˆë¬¸ ìˆ˜ |
| **í™•ì¥** | ë‹¨ì¼ Phase(íŒŒì´í”„ë¼ì¸) | **Two-Phase** (ì°¨ëŸ‰ ì¶”ì²œ + ì¼ì • ìŠ¤ì¼€ì¤„ë§) |

#### ì—°êµ¬ì  ê¸°ì—¬

1. **ë„ë©”ì¸ ì ìš©**: í•™ìˆ ì  ê²Œì„ í™˜ê²½ â†’ ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ í”„ë¡œì„¸ìŠ¤
2. **íš¨ìœ¨ì„± ê°•í™”**: 20ê°œ ì§ˆë¬¸ â†’ **í•„ìˆ˜ 4ê°œ ì§ˆë¬¸ + ì„ íƒ 4ê°œ ì§ˆë¬¸**ìœ¼ë¡œ ëª©í‘œ ë‹¬ì„±
3. **íŒŒì´í”„ë¼ì¸ í™•ì¥**: ì •ë³´ ìˆ˜ì§‘ â†’ ì¶”ì²œ â†’ **ìŠ¤ì¼€ì¤„ë§ê¹Œì§€ End-to-End í†µí•©**
4. **ì‹œë„ˆì§€ ìµœì í™”**: Phase ê°„ í˜‘ì—… íš¨ê³¼ë¥¼ Synergy Bonusë¡œ ì •ëŸ‰í™”

---

## ğŸ“± ì‹¤í–‰ ê²°ê³¼ (Mobile App Demo)

### ëª¨ë°”ì¼ ìµœì í™” ëŒ€í™”í˜• ì¶”ì²œ ì‹œìŠ¤í…œ

í•™ìŠµëœ Q-Learning ëª¨ë¸ì„ **ëª¨ë°”ì¼ ì¹œí™”ì  UI**ë¡œ êµ¬í˜„í•˜ì—¬ ì‹¤ì‹œê°„ ëŒ€í™”í˜• ì¶”ì²œ ì‹œìŠ¤í…œì„ ì œê³µí•¨.

> ğŸ¯ **ëª¨ë°”ì¼ ì•± íŠ¹ì§•**: í„°ì¹˜ ê¸°ë°˜ ì¸í„°í˜ì´ìŠ¤, ë°˜ì‘í˜• ë””ìì¸, ì‹¤ì‹œê°„ MDP ìƒíƒœ ì‹œê°í™”

<p align="center">
  <img src="./docs/chat/chat1.png" width="280" height="500" style="border: 8px solid #333; border-radius: 20px; margin: 8px; object-fit: cover; object-position: left top;" alt="ì‹œì‘ í™”ë©´"/>
  <img src="./docs/chat/chat2.png" width="280" height="500" style="border: 8px solid #333; border-radius: 20px; margin: 8px; object-fit: cover; object-position: top;" alt="ì§ˆë¬¸ ë‹¨ê³„"/>
</p>
<p align="center">
  <img src="./docs/chat/chat3.png" width="280" height="500" style="border: 8px solid #333; border-radius: 20px; margin: 8px; object-fit: cover; object-position: top;" alt="ì¶”ì²œ ê²°ê³¼"/>
  <img src="./docs/chat/chat4.png" width="280" height="500" style="border: 8px solid #333; border-radius: 20px; margin: 8px; object-fit: cover; object-position: top;" alt="ì˜ˆì•½ ì™„ë£Œ"/>
</p>

| ë‹¨ê³„ | í™”ë©´ | ì„¤ëª… |
|------|------|------|
| **1. ì‹œì‘** | ì¢Œì¸¡ ìƒë‹¨ | MDP ìƒíƒœ ì‹œê°í™” (Action, Reward, State, Îµ, Step, Policy) |
| **2. ì§ˆë¬¸** | ìš°ì¸¡ ìƒë‹¨ | í•„ìˆ˜ ì§ˆë¬¸ 4ê°œ ìˆ˜ì§‘, Îµ-greedy Policy í‘œì‹œ |
| **3. ì¶”ì²œ** | ì¢Œì¸¡ í•˜ë‹¨ | ê³ ê° ì‘ë‹µ ê¸°ë°˜ ìµœì  ì°¨ëŸ‰ ì¶”ì²œ, ìƒì„¸ ì •ë³´ í‘œì‹œ |
| **4. ì™„ë£Œ** | ìš°ì¸¡ í•˜ë‹¨ | ì§€ì—­ ê¸°ë°˜ ì‹œìŠ¹ì„¼í„° ë§¤ì¹­, ì˜ˆì•½ í™•ì • (Reward +15) |

### MDP ì‹œê°í™” ìš”ì†Œ

| ìš”ì†Œ | ì„¤ëª… | í‘œì‹œ ì˜ˆì‹œ |
|------|------|-----------|
| ğŸ¯ **Action** | í˜„ì¬ ìˆ˜í–‰ ì¤‘ì¸ í–‰ë™ | ìš©ë„ ì§ˆë¬¸, ì°¨ëŸ‰ ì¶”ì²œ, ì˜ˆì•½ ì™„ë£Œ |
| ğŸ† **Reward** | ëˆ„ì  ë³´ìƒ | +15.0 (ì˜ˆì•½ ì„±ê³µ ì‹œ) |
| ğŸ“‹ **State** | ì§ˆë¬¸ ì§„í–‰ë¥  | 4/8 (4ê°œ ì§ˆë¬¸ ì™„ë£Œ) |
| ğŸ² **Îµ** | íƒí—˜ë¥  | 0.05 (í•™ìŠµ í›„) |
| ğŸ‘£ **Step** | ì—í”¼ì†Œë“œ ìŠ¤í… | 6 |
| ğŸ”/ğŸ¯ **Policy** | íƒí—˜/í™œìš© ëª¨ë“œ | í™œìš© (Qê°’ ê¸°ë°˜ ì„ íƒ) |

### í•µì‹¬ ì„±ê³¼

| ì§€í‘œ | ê²°ê³¼ |
|------|------|
| **í‰ê·  ì§ˆë¬¸ ìˆ˜** | 4ê°œ (í•„ìˆ˜) + Î± (ì„ íƒ) |
| **ì˜ˆì•½ ì™„ë£Œ Reward** | +15.0 |
| **ëª¨ë¸ ë™ê¸°í™”** | 5 ì—í”¼ì†Œë“œë§ˆë‹¤ ìë™ ì €ì¥ |
| **ì‹¤ì‹œê°„ í•™ìŠµ** | ì±—ë´‡ ì‚¬ìš© ì‹œ Q-table ì—…ë°ì´íŠ¸ |

---

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

ìë™ì°¨ ë¸Œëœë“œ í™ˆí˜ì´ì§€ì˜ ì‹œìŠ¹ ì˜ˆì•½ ê³¼ì •ì—ì„œ ê³ ê°ì´ ê²ªëŠ” ë²ˆê±°ë¡œì›€ì„ **ê°•í™”í•™ìŠµ ê¸°ë°˜ ëŒ€í™”í˜• ì¶”ì²œ ì‹œìŠ¤í…œ**ìœ¼ë¡œ í•´ê²°í•¨.

> ğŸ“± **ëª¨ë°”ì¼ ì•±ìœ¼ë¡œ êµ¬í˜„**: Streamlit ê¸°ë°˜ ë°˜ì‘í˜• ì›¹ì•±ìœ¼ë¡œ ëª¨ë°”ì¼ í™˜ê²½ì—ì„œ ìµœì í™”ëœ ì‚¬ìš©ì ê²½í—˜ ì œê³µ

### ê°•í™”í•™ìŠµ ê´€ì ì˜ ë¬¸ì œ ì •ì˜

ë³¸ í”„ë¡œì íŠ¸ëŠ” **Agent-Environment ìƒí˜¸ì‘ìš©** êµ¬ì¡°ë¡œ ì„¤ê³„ë¨.

- **Environment**: ê³ ê°(ì‘ë‹µì), ì°¨ëŸ‰ ë°ì´í„°ë² ì´ìŠ¤(ì¬ê³ ), ì‹œìŠ¹ ì„¼í„° ìƒíƒœ(ìŠ¤ì¼€ì¤„)ë¡œ êµ¬ì„±
- **Agent**: ê°•í™”í•™ìŠµ ê¸°ë°˜ ì˜ì‚¬ê²°ì • ì£¼ì²´
- **State**: ê³ ê° ì‘ë‹µ íˆìŠ¤í† ë¦¬, í›„ë³´ ì°¨ëŸ‰ ëª©ë¡, ì„¼í„° ê°€ìš© ìƒíƒœ
- **Action**: ì§ˆë¬¸ ì„ íƒ, ì°¨ëŸ‰ ì¶”ì²œ, ì¼ì • ë°°ì •
- **Reward**: ê³ ê° ë§Œì¡±ë„ + ì˜ˆì•½ ì„±ì‚¬ - ì§ˆë¬¸ ìˆ˜ - ëŒ€ê¸°ì‹œê°„

### Two-Phase Hybrid System

ë³¸ ì‹œìŠ¤í…œì€ **ê°•í™”í•™ìŠµ + ê·œì¹™ ê¸°ë°˜ í•˜ì´ë¸Œë¦¬ë“œ** êµ¬ì¡°ë¡œ ì„¤ê³„ë¨.

- **Phase 1 (Recommendation Agent)**: Q-Learning ê¸°ë°˜, ìµœì†Œ ì§ˆë¬¸ìœ¼ë¡œ ìµœì  ì°¨ëŸ‰ ì¶”ì²œ
- **Phase 2 (Scheduling Agent)**: í•˜ì´ë¸Œë¦¬ë“œ ë°©ì‹
  - ê³ ê° ì‘ëŒ€: ì§ˆë¬¸ ê¸°ë°˜ (ê·œì¹™) - ì„ í˜¸ ì¼ì • ìˆ˜ì§‘
  - ì„¼í„° ìµœì í™”: DQN ê¸°ë°˜ - ìì› ë°°ë¶„ ë° ëŒ€ì•ˆ ì œì‹œ ìµœì í™”

ë‘ PhaseëŠ” ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©°, Phase 1ì˜ ì¶”ì²œ ê²°ê³¼ê°€ Phase 2ì˜ ì…ë ¥ìœ¼ë¡œ ì „ë‹¬ë¨.

### í•™ìŠµ ëª©í‘œ

Agentê°€ í•™ìŠµì„ í†µí•´ ìŠ¤ìŠ¤ë¡œ í„°ë“í•´ì•¼ í•˜ëŠ” ê²ƒ:

1. ì–´ë–¤ ì§ˆë¬¸ì´ ê³ ê° ì„ í˜¸ íŒŒì•…ì— íš¨ê³¼ì ì¸ê°€?
2. ëª‡ ê°œì˜ ì§ˆë¬¸ í›„ ì¶”ì²œí•´ì•¼ ì •í™•ë„ì™€ íš¨ìœ¨ì˜ ê· í˜•ì´ ë§ëŠ”ê°€?
3. ì–´ë–¤ ì°¨ëŸ‰ì„ ì¶”ì²œí•´ì•¼ ê³ ê° ë§Œì¡±ë„ê°€ ë†’ì€ê°€?
4. ì–´ë–¤ ì‹œê°„ëŒ€ì— ë°°ì •í•´ì•¼ ê³ ê°ê³¼ ì„¼í„° ëª¨ë‘ ë§Œì¡±í•˜ëŠ”ê°€?

### ì°¨ë³„í™” í¬ì¸íŠ¸

1. **ëŒ€í™”í˜• ì¶”ì²œ**: ë‹¨ìˆœ í•„í„°ë§ì´ ì•„ë‹Œ Sequential Decision Making ê¸°ë°˜ ì¶”ì²œ
2. **Two-Phase í†µí•©**: ì¶”ì²œê³¼ ìŠ¤ì¼€ì¤„ë§ì„ ì—°ê²°í•œ ì‹¤ìš©ì  ì‹œìŠ¤í…œ
3. **ì‹œë®¬ë ˆì´ì…˜ í™˜ê²½**: ë„ë©”ì¸ ì§€ì‹ ê¸°ë°˜ í˜„ì‹¤ì ì¸ ê³ ê°Â·ì„¼í„° ì‹œë®¬ë ˆì´ì…˜

### êµ¬í˜„ ë²”ìœ„

- **ë¶„ì„ ëŒ€ìƒ**: Hyundai, Kia, Genesis 3ê°œ ë¸Œëœë“œ ì‹œìŠ¹ ì˜ˆì•½ í”„ë¡œì„¸ìŠ¤
- **êµ¬í˜„ ëŒ€ìƒ**: **Hyundai** ë¸Œëœë“œ ê¸°ì¤€ìœ¼ë¡œ êµ¬í˜„ (7ë‹¨ê³„ í”„ë¡œì„¸ìŠ¤ â†’ 2ë‹¨ê³„ë¡œ ë‹¨ìˆœí™”)
- **í™•ì¥ì„±**: ì°¨ëŸ‰ DBì™€ ì§ˆë¬¸ì…‹ë§Œ êµì²´í•˜ë©´ ë‹¤ë¥¸ ë¸Œëœë“œì—ë„ ì ìš© ê°€ëŠ¥í•œ êµ¬ì¡°ë¡œ ì„¤ê³„

---

## ğŸš¨ í˜„ì¬ ë¬¸ì œ

### ë¸Œëœë“œë³„ ì‹œìŠ¹ ì˜ˆì•½ í”„ë¡œì„¸ìŠ¤ ë¶„ì„

| ë¸Œëœë“œ | ë‹¨ê³„ ìˆ˜ | ì£¼ìš” ë‹¨ê³„ |
|--------|---------|-----------|
| **Hyundai** | 7ë‹¨ê³„ | ëª¨ë¸ â†’ ì¥ì†Œ â†’ ë°©ë²• â†’ ì¼ì • â†’ ìš´ì „ê²½ë ¥ â†’ ë³´ìœ ì°¨ì¢… â†’ ìš”ì²­ì‚¬í•­ |
| **Genesis** | 5ë‹¨ê³„ | ì°¨ëŸ‰ â†’ ë“œë¼ì´ë¹™ë¼ìš´ì§€ â†’ ì¼ì • â†’ ìœ ì˜ì‚¬í•­ â†’ í™•ì¸ |
| **Kia** | 7ë‹¨ê³„ | ëª¨ë¸ â†’ ê±°ì  â†’ ë°©ë²• â†’ ì¼ì • â†’ ë™ì˜ â†’ ì‹œìŠ¹ì â†’ ì„¤ë¬¸ |

> ğŸ“ ì‹¤ì œ í™”ë©´ ìº¡ì²˜: `resource/image/brand/` ì°¸ì¡°

### ê³ ê°ì˜ ë²ˆê±°ë¡œì›€ (Pain Points)

1. **ì°¨ëŸ‰ ì„ íƒì˜ ì–´ë ¤ì›€**: ìˆ˜ì‹­ ê°œ ëª¨ë¸ ì¤‘ ì–´ë–¤ ì°¨ê°€ ë‚˜ì—ê²Œ ë§ëŠ”ì§€ ëª¨ë¦„
2. **ë³µì¡í•œ ë‹¨ê³„**: 5~7ë‹¨ê³„ë¥¼ ëª¨ë‘ ì§ì ‘ ì…ë ¥í•´ì•¼ í•¨
3. **ì¼ì • ì„ íƒì˜ ë¶ˆí¸í•¨**: ìº˜ë¦°ë”ì—ì„œ ê°€ëŠ¥í•œ ì‹œê°„ëŒ€ë¥¼ ì§ì ‘ í™•ì¸ í•„ìš”
4. **ì •ë³´ ì…ë ¥ ë°˜ë³µ**: ìš´ì „ê²½ë ¥, ë³´ìœ ì°¨ì¢… ë“± ë§¤ë²ˆ ì…ë ¥

### ê°•í™”í•™ìŠµìœ¼ë¡œ í•´ê²°

```
AS-IS: ê³ ê°ì´ ëª¨ë“  ê²ƒì„ ì§ì ‘ ì„ íƒ (5~7ë‹¨ê³„)
         â†“
TO-BE: AIê°€ ìµœì†Œ ì§ˆë¬¸ìœ¼ë¡œ ì¶”ì²œ + ìµœì  ì¼ì • ìë™ ë°°ì • (2ë‹¨ê³„)
```

- **Phase 1**: 4ê°œ í•„ìˆ˜ ì§ˆë¬¸ìœ¼ë¡œ ìµœì  ì‹œìŠ¹ ì°¨ëŸ‰ ì¶”ì²œ
- **Phase 2**: ê³ ê° ì„ í˜¸ ì‹œê°„ + ì„¼í„° ê°€ìš© ìƒí™© ê³ ë ¤í•˜ì—¬ ìµœì  ì¼ì • ìë™ ë°°ì •

---

## ğŸ¤– ì™œ ê°•í™”í•™ìŠµì¸ê°€?

### ë‹¨ìˆœ ì¶”ì²œ vs ëŒ€í™”í˜• ì¶”ì²œ

| êµ¬ë¶„ | ë‹¨ìˆœ ì¶”ì²œ | ëŒ€í™”í˜• ì¶”ì²œ (ë³¸ í”„ë¡œì íŠ¸) |
|------|-----------|---------------------------|
| ë°©ì‹ | í”„ë¡œí•„ â†’ ì¦‰ì‹œ ì¶”ì²œ | ì§ˆë¬¸ â†’ ì‘ë‹µ â†’ ì§ˆë¬¸ â†’ ... â†’ ì¶”ì²œ |
| ì í•© ì•Œê³ ë¦¬ì¦˜ | Collaborative Filtering, Rule-based | **ê°•í™”í•™ìŠµ (RL)** |
| ì˜ì‚¬ê²°ì • | 1íšŒì„± | **Sequential Decision Making** |

### ëŒ€í™”í˜• ì¶”ì²œì˜ RL ì í•©ì„±

ë³¸ í”„ë¡œì íŠ¸ëŠ” **"20 Questions" ê²Œì„**ê³¼ ìœ ì‚¬í•œ êµ¬ì¡°ë¥¼ ê°€ì§:

```
Agent: "ì£¼ë¡œ ì–´ë–¤ ìš©ë„ë¡œ ì‚¬ìš©í•˜ì„¸ìš”?"     â† Action 1: ì§ˆë¬¸ ì„ íƒ
ê³ ê°: "ì¶œí‡´ê·¼ì´ìš”"                        â† í™˜ê²½ ì‘ë‹µ (State ë³€í™”)
Agent: "ê°€ì¡±ì€ ëª‡ ëª…ì´ì„¸ìš”?"              â† Action 2: ì¶”ê°€ ì§ˆë¬¸ or ì¶”ì²œ?
ê³ ê°: "4ëª…ì´ìš”"                           â† í™˜ê²½ ì‘ë‹µ (State ë³€í™”)
Agent: "ì‹¼íƒ€í˜ í•˜ì´ë¸Œë¦¬ë“œ ì¶”ì²œë“œë¦½ë‹ˆë‹¤"    â† Action 3: ì¶”ì²œ ê²°ì •
ê³ ê°: "ë§ˆìŒì— ë“¤ì–´ìš”!" (ë§Œì¡±ë„ 80%)        â† Reward ë°œìƒ
```

### RLì´ í•™ìŠµí•˜ëŠ” ê²ƒ

| í•™ìŠµ ëª©í‘œ | ì„¤ëª… |
|-----------|------|
| **ì§ˆë¬¸ ìµœì†Œí™”** | ëª‡ ê°œì˜ ì§ˆë¬¸ìœ¼ë¡œ ì •í™•íˆ ì¶”ì²œí•  ìˆ˜ ìˆëŠ”ì§€ |
| **ì§ˆë¬¸ ìˆœì„œ ìµœì í™”** | ì–´ë–¤ ì§ˆë¬¸ì´ ì •ë³´ëŸ‰(Information Gain)ì´ ë†’ì€ì§€ |
| **ì¶”ì²œ íƒ€ì´ë°** | ì–¸ì œ ì§ˆë¬¸ì„ ë©ˆì¶”ê³  ì¶”ì²œí•´ì•¼ í•˜ëŠ”ì§€ |
| **Exploration-Exploitation** | ìƒˆë¡œìš´ ì§ˆë¬¸ ì „ëµ íƒìƒ‰ vs ê²€ì¦ëœ ì „ëµ í™œìš© |

### ê°•í™”í•™ìŠµ ì ìš©ì˜ í•µì‹¬ ìš”ì†Œ

| ìš”ì†Œ | ììœ¨ì£¼í–‰ | ëŒ€í™”í˜• ì¶”ì²œ (ë³¸ í”„ë¡œì íŠ¸) |
|------|----------|---------------------------|
| Sequential Decision | âœ… ì—°ì† ì œì–´ | âœ… ì§ˆë¬¸ â†’ ì§ˆë¬¸ â†’ ì¶”ì²œ |
| Delayed Reward | âœ… ëª©ì ì§€ ë„ì°© | âœ… ì¶”ì²œ í›„ ë§Œì¡±ë„ í™•ì¸ |
| State Transition | âœ… ì°¨ëŸ‰ ìœ„ì¹˜ ë³€í™” | âœ… ê³ ê° ì‘ë‹µìœ¼ë¡œ ì •ë³´ ì¶•ì  |
| Exploration-Exploitation | âœ… ìƒˆ ê²½ë¡œ íƒìƒ‰ | âœ… ë” ì§ˆë¬¸í• ì§€ vs ë°”ë¡œ ì¶”ì²œí• ì§€ |

---

## ğŸ¯ MDP ì„¤ê³„

ìƒì„¸ State, Action, Reward ì„¤ê³„ëŠ” [MDP_DESIGN.md](./docs/MDP_DESIGN.md) ì°¸ì¡°.

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
ê³ ê° ì›¹ì‚¬ì´íŠ¸ ì ‘ì†
        |
        v
+---------------------------------------+
|   Phase 1: ì‹œìŠ¹ ì°¨ëŸ‰ ì¶”ì²œ             |
|   - Q-Learning                        |
|   - State: ê³ ê° í”„ë¡œí•„                |
|   - Action: ì§ˆë¬¸ ë˜ëŠ” ì¶”ì²œ            |
+---------------------------------------+
        |
        v (ì¶”ì²œ ì°¨ëŸ‰ ëª©ë¡)
+---------------------------------------+
|   ì¥ì†Œ ì„ íƒ (ê·œì¹™ ê¸°ë°˜)               |
|   - ìœ„ì¹˜ ê¶Œí•œ O -> GPS ê¸°ë°˜           |
|   - ìœ„ì¹˜ ê¶Œí•œ X -> ì§€ì—­ ì§ˆë¬¸          |
+---------------------------------------+
        |
        v (ì„ íƒëœ ëŒ€ë¦¬ì )
+---------------------------------------+
|   Phase 2: ìŠ¤ì¼€ì¤„ë§ (í•˜ì´ë¸Œë¦¬ë“œ)      |
+---------------------------------------+
|   [ê³ ê° ì‘ëŒ€] ê·œì¹™ ê¸°ë°˜               |
|   - ì„ í˜¸ ì¼ì • ì§ˆë¬¸ -> ê°€ìš©ì„± í™•ì¸     |
+---------------------------------------+
|   [ì„¼í„° ìµœì í™”] DQN ê¸°ë°˜              |
|   - ìì› ë°°ë¶„ ìµœì í™”                  |
|   - ëŒ€ì•ˆ ì œì‹œ ì „ëµ í•™ìŠµ               |
+---------------------------------------+
        |
        v
ìµœì¢… ìŠ¤ì¼€ì¤„ + ì˜ˆì•½ í™•ì •
```

### ë‹¨ê³„ë³„ ì—­í• 

| ë‹¨ê³„ | ëª©ì  | ë°©ì‹ |
|------|------|------|
| **Phase 1** | ìµœì  ì°¨ëŸ‰ ì¶”ì²œ | Q-Learning (ì‹œë®¬ë ˆì´ì…˜ í•™ìŠµ) |
| **ì¥ì†Œ ì„ íƒ** | ì‹œìŠ¹ ëŒ€ë¦¬ì  ì„ íƒ | ê·œì¹™ ê¸°ë°˜ (GPS ë˜ëŠ” ì§ˆë¬¸) |
| **Phase 2** | ì¼ì • ìˆ˜ì§‘ + ì„¼í„° ìµœì í™” | í•˜ì´ë¸Œë¦¬ë“œ (ê·œì¹™ + DQN) |

### Phase 1 ëª©ì  ë° êµ¬ì¡°

Phase 1ì€ **ì‹œë®¬ë ˆì´ì…˜ ê¸°ë°˜ í•™ìŠµ**ì„ í†µí•´ ìµœì ì˜ ì§ˆë¬¸ ì „ëµì„ í•™ìŠµí•œ ëª¨ë¸ì„ ìƒì„±í•˜ëŠ” ê²ƒì´ ëª©ì ì„.

#### ì™œ ì‹œë®¬ë ˆì´ì…˜ì¸ê°€?

| ë°©ì‹ | ì¥ì  | ë‹¨ì  |
|------|------|------|
| ì‹¤ì œ ê³ ê°ìœ¼ë¡œ í•™ìŠµ | ì‹¤ì œ ë°ì´í„° | ìˆ˜ì²œ ë²ˆ ì‹œí–‰ì°©ì˜¤ â†’ ê³ ê° ê²½í—˜ ì•…í™” |
| **ì‹œë®¬ë ˆì´ì…˜ìœ¼ë¡œ í•™ìŠµ** | ë¹ ë¥¸ íƒìƒ‰, ë¬´í•œ ë°˜ë³µ ê°€ëŠ¥ | ì‹œë®¬ë ˆì´í„° í’ˆì§ˆì— ì˜ì¡´ |

#### Training vs Deployment

```
+------------------------------------------------------------------+
|  Training Phase (í˜„ì¬ êµ¬í˜„)                                      |
+------------------------------------------------------------------+
|  1. ì‹œë®¬ë ˆì´ì…˜ ê³ ê° ìƒì„± (ëœë¤ í”„ë¡œí•„: ì˜ˆì‚°, ê°€ì¡± ìˆ˜ ë“±)         |
|  2. Agentê°€ ì§ˆë¬¸ ì„ íƒ (e-greedy íƒí—˜)                            |
|  3. Environmentê°€ ê³ ê° ëŒ€ì‹  ìë™ ì‘ë‹µ (ìˆ¨ê²¨ì§„ ì„ í˜¸ë„ ê¸°ë°˜)       |
|  4. Agentê°€ ì°¨ëŸ‰ ì¶”ì²œ                                            |
|  5. Environmentê°€ Reward ìë™ ê³„ì‚° (ë§¤ì¹­ ì ìˆ˜ ê¸°ë°˜)              |
|  6. Q-table ì—…ë°ì´íŠ¸ -> 1000+ ì—í”¼ì†Œë“œ ë°˜ë³µ                      |
+------------------------------------------------------------------+
                            |
                            v í•™ìŠµëœ ëª¨ë¸ ì €ì¥
+------------------------------------------------------------------+
|  Deployment Phase (ì¶”í›„ êµ¬í˜„)                                    |
+------------------------------------------------------------------+
|  1. ì‹¤ì œ ê³ ê°ì´ ì§ˆë¬¸ì— ë‹µë³€                                      |
|  2. í•™ìŠµëœ ëª¨ë¸ì´ ìµœì  ì§ˆë¬¸ ì„ íƒ (Greedy)                        |
|  3. í•™ìŠµëœ ëª¨ë¸ì´ ì°¨ëŸ‰ ì¶”ì²œ                                      |
|  4. ì‹¤ì œ ê³ ê° ë§Œì¡±ë„ í”¼ë“œë°± ìˆ˜ì§‘                                 |
+------------------------------------------------------------------+
```

#### Phase 1 í•™ìŠµ ê²°ê³¼

ì‹œë®¬ë ˆì´ì…˜ í•™ìŠµì„ í†µí•´ Agentê°€ ìŠ¤ìŠ¤ë¡œ í„°ë“í•˜ëŠ” ê²ƒ:

- âœ… ì–´ë–¤ ì§ˆë¬¸ ìˆœì„œê°€ íš¨ìœ¨ì ì¸ê°€
- âœ… ëª‡ ê°œì˜ ì§ˆë¬¸ í›„ ì¶”ì²œí•´ì•¼ í•˜ëŠ”ê°€
- âœ… ì–´ë–¤ ìƒí™©ì—ì„œ ì–´ë–¤ ì°¨ëŸ‰ì„ ì¶”ì²œí•´ì•¼ í•˜ëŠ”ê°€

### ì¥ì†Œ ì„ íƒ (ê·œì¹™ ê¸°ë°˜)

ì‹œìŠ¹ ëŒ€ë¦¬ì  ì„ íƒì€ ê°•í™”í•™ìŠµì´ ì•„ë‹Œ **ê·œì¹™ ê¸°ë°˜**ìœ¼ë¡œ ì²˜ë¦¬í•¨.

```
+-------------------------------------------------------+
|  ê³ ê°ì´ ì›¹ì‚¬ì´íŠ¸ ì ‘ì†                                 |
+-------------------------------------------------------+
                          |
                          v
              +--------------------------+
              |   ìœ„ì¹˜ ê¶Œí•œ í—ˆìš©?        |
              +--------------------------+
                 |                  |
            Yes  v                  v  No
    +------------------+  +------------------------------+
    | GPS ê¸°ë°˜         |  | ì§ˆë¬¸: "ì–´ëŠ ì§€ì—­ì—ì„œ        |
    | ì£¼ë³€ ëŒ€ë¦¬ì       |  |   ì‹œìŠ¹í•˜ì‹œê² ì–´ìš”?"          |
    | ìë™ ì¶”ì²œ        |  | (ì„œìš¸/ê²½ê¸°/ë¶€ì‚°/...)        |
    +------------------+  +------------------------------+
                 |                  |
                 v                  v
          +-------------------------------------------+
          |  í•´ë‹¹ ì§€ì—­ ì‹œìŠ¹ ëŒ€ë¦¬ì  ëª©ë¡ ì œì‹œ          |
          |  (ê±°ë¦¬ìˆœ ë˜ëŠ” ê°€ìš© ì‹œê°„ ë§ì€ ìˆœ)          |
          +-------------------------------------------+
```

#### ì™œ ê·œì¹™ ê¸°ë°˜ì¸ê°€?

- ì¥ì†Œ ì„ íƒì€ **íƒìƒ‰ ê³µê°„ì´ ì‘ìŒ** (ì§€ì—­ â†’ ëŒ€ë¦¬ì )
- ìµœì í™” ê¸°ì¤€ì´ **ëª…í™•í•¨** (ê±°ë¦¬, ê°€ìš©ì„±)
- ê°•í™”í•™ìŠµì˜ ì‹œí–‰ì°©ì˜¤ê°€ ë¶ˆí•„ìš”

### Phase 2 ëª©ì  ë° êµ¬ì¡°

Phase 2ëŠ” **í•˜ì´ë¸Œë¦¬ë“œ ë°©ì‹**ìœ¼ë¡œ ê³ ê° ì¼ì • ìˆ˜ì§‘ê³¼ ì„¼í„° ìì› ìµœì í™”ë¥¼ ìˆ˜í–‰í•¨.

#### ì™œ í•˜ì´ë¸Œë¦¬ë“œì¸ê°€?

| êµ¬ë¶„ | ê³ ê° ì¼ì • ìˆ˜ì§‘ | ì„¼í„° ìì› ìµœì í™” |
|------|---------------|-----------------|
| íŠ¹ì„± | ê³ ê°ë§Œ ì•Œê³  ìˆìŒ | ë³µì¡í•œ ì œì•½ ì¡°ê±´ |
| ìµœì  ë°©ì‹ | ì§ì ‘ ì§ˆë¬¸ (ê·œì¹™) | í•™ìŠµ ê¸°ë°˜ (RL) |
| ì´ìœ  | ì¶”ë¡  ë¶ˆê°€ëŠ¥ | ë‹¤ì–‘í•œ ìƒí™© ëŒ€ì‘ í•„ìš” |

#### Phase 2 ì „ì²´ íë¦„

```
+------------------------------------------------------------------+
|  [1] ê³ ê° ì‘ëŒ€ (ê·œì¹™ ê¸°ë°˜)                                       |
+------------------------------------------------------------------+
|  ì§ˆë¬¸: "ì–¸ì œ ì‹œìŠ¹í•˜ì‹œê² ì–´ìš”?"                                    |
|  - ì„ í˜¸ ë‚ ì§œ ì„ íƒ (ìº˜ë¦°ë” or ì´ë²ˆì£¼/ë‹¤ìŒì£¼)                      |
|  - ì„ í˜¸ ì‹œê°„ëŒ€ ì„ íƒ (ì˜¤ì „/ì˜¤í›„/ì €ë…)                             |
+------------------------------------------------------------------+
                              |
                              v ê³ ê° ì„ í˜¸ ì¼ì •
+------------------------------------------------------------------+
|  [2] ì„¼í„° ê°€ìš©ì„± í™•ì¸                                            |
+------------------------------------------------------------------+
|  - í•´ë‹¹ ì‹œê°„ëŒ€ ì°¨ëŸ‰ ê°€ìš© ì—¬ë¶€                                    |
|  - ë‹´ë‹¹ ì§ì› ë°°ì • ê°€ëŠ¥ ì—¬ë¶€                                      |
|  - ê¸°ì¡´ ì˜ˆì•½ê³¼ ì¶©ëŒ ì—¬ë¶€                                         |
+------------------------------------------------------------------+
              |                                |
         ê°€ëŠ¥ v                                v ë¶ˆê°€ëŠ¥
+----------------------------+  +-----------------------------------+
|  ì˜ˆì•½ í™•ì •                 |  |  [3] ëŒ€ì•ˆ ì œì‹œ (DQN ê¸°ë°˜)         |
|  - ì¼ì • í™•ì • ì•Œë¦¼          |  |  - ìµœì  ëŒ€ì•ˆ ì‹œê°„ ì„ íƒ            |
|  - ë¦¬ë§ˆì¸ë” ì„¤ì •           |  |  - ê³ ê° ìˆ˜ë½ë¥  ìµœëŒ€í™”             |
+----------------------------+  +-----------------------------------+
```

#### ì„¼í„° ìì› ë° ì œì•½ ì¡°ê±´

```
+------------------------------------------------------------------+
|  ì‹œìŠ¹ ì„¼í„° ìì›                                                  |
+------------------------------------------------------------------+
|  - ì‹œìŠ¹ ì°¨ëŸ‰: ëª¨ë¸ë³„ 1~2ëŒ€ (ì˜ˆ: ì•„ë°˜ë–¼ 2ëŒ€, ì‹¼íƒ€í˜ 1ëŒ€)          |
|  - ë‹´ë‹¹ ì§ì›: 3~5ëª… (ë™ì‹œ ì‘ëŒ€ í•œê³„)                             |
|  - ìš´ì˜ ì‹œê°„: 09:00 ~ 18:00 (1ì‹œê°„ ë‹¨ìœ„ ìŠ¬ë¡¯)                    |
|  - ì˜ˆì•½ í˜„í™©: ì¼ë³„ ì˜ˆì•½ ë°€ë„ ìƒì´                                |
+------------------------------------------------------------------+
```

#### ì„¼í„° ê´€ì  ìµœì í™” (DQN í•™ìŠµ ëŒ€ìƒ)

| ìµœì í™” ëª©í‘œ | ì„¤ëª… | Reward |
|-------------|------|--------|
| **ëŒ€ì•ˆ ì œì‹œ ì „ëµ** | ì–´ë–¤ ëŒ€ì•ˆì„ ë¨¼ì € ì œì‹œí•´ì•¼ ìˆ˜ë½ë¥ ì´ ë†’ì€ê°€ | +ìˆ˜ë½, -ê±°ì ˆ |
| **ë¶€í•˜ ë¶„ì‚°** | ì˜ˆì•½ì´ íŠ¹ì • ì‹œê°„ì— ëª°ë¦¬ì§€ ì•Šê²Œ ìœ ë„ | +ê· ë“± ë¶„í¬ |
| **ì°¨ëŸ‰ í™œìš©ë¥ ** | ëª¨ë“  ì°¨ëŸ‰ì´ ê³¨ê³ ë£¨ ì‚¬ìš©ë˜ê²Œ | +í™œìš©ë¥  |
| **ëŒ€ê¸°ì—´ ê´€ë¦¬** | ë™ì‹œ ìš”ì²­ ì‹œ ìš°ì„ ìˆœìœ„ ê²°ì • | +ì²˜ë¦¬ëŸ‰, -ëŒ€ê¸°ì‹œê°„ |

#### ëŒ€ì•ˆ ì œì‹œ ìµœì í™” ì˜ˆì‹œ

```
ìƒí™©: ê³ ê°ì´ "í† ìš”ì¼ ì˜¤ì „" ì›í•˜ì§€ë§Œ ë§Œì„

+------------------------------------------------------------------+
|  ê°€ëŠ¥í•œ ëŒ€ì•ˆë“¤                                                   |
+------------------------------------------------------------------+
|  A. í† ìš”ì¼ ì˜¤í›„ 2ì‹œ (ê°™ì€ ë‚ , ë‹¤ë¥¸ ì‹œê°„)                         |
|  B. ì¼ìš”ì¼ ì˜¤ì „ 10ì‹œ (ë‹¤ë¥¸ ë‚ , ê°™ì€ ì‹œê°„)                        |
|  C. ê¸ˆìš”ì¼ ì €ë… 6ì‹œ (í‰ì¼, í‡´ê·¼ í›„)                              |
|  D. ë‹¤ìŒì£¼ í† ìš”ì¼ ì˜¤ì „ (1ì£¼ì¼ í›„)                                |
+------------------------------------------------------------------+
                              |
                              v
        DQNì´ í•™ìŠµí•˜ëŠ” ê²ƒ:
        - ê³ ê° ìœ í˜•ë³„ ìµœì  ëŒ€ì•ˆ ìˆœì„œ
        - ì„¼í„° ìƒí™©ë³„ ì¶”ì²œ ì „ëµ
        - ìˆ˜ë½ë¥ ì„ ìµœëŒ€í™”í•˜ëŠ” ì œì•ˆ ë°©ì‹
```

#### Phase 2 MDP ì„¤ê³„

**State (ìƒíƒœ)**:
```python
state = {
    'customer_preference': {
        'preferred_date': '2024-01-20',      # ê³ ê° ì„ í˜¸ ë‚ ì§œ
        'preferred_time': 'morning',          # ì˜¤ì „/ì˜¤í›„/ì €ë…
        'flexibility': 'medium'               # ìœ ì—°ì„± (high/medium/low)
    },
    'center_state': {
        'available_slots': [...],             # ê°€ìš© ì‹œê°„ ìŠ¬ë¡¯
        'vehicle_availability': {...},        # ì°¨ëŸ‰ë³„ ê°€ìš© í˜„í™©
        'staff_schedule': {...},              # ì§ì› ìŠ¤ì¼€ì¤„
        'pending_requests': 3                 # ëŒ€ê¸° ì¤‘ì¸ ìš”ì²­ ìˆ˜
    },
    'recommended_car': 'santafe_hybrid'       # Phase 1 ì¶”ì²œ ì°¨ëŸ‰
}
```

**Action (í–‰ë™)**:
```python
actions = {
    0: 'confirm_booking',           # ì˜ˆì•½ í™•ì •
    1: 'suggest_same_day_alt',      # ê°™ì€ ë‚  ë‹¤ë¥¸ ì‹œê°„ ì œì•ˆ
    2: 'suggest_next_day_alt',      # ë‹¤ìŒ ë‚  ê°™ì€ ì‹œê°„ ì œì•ˆ
    3: 'suggest_weekday_alt',       # í‰ì¼ ëŒ€ì•ˆ ì œì•ˆ
    4: 'suggest_next_week_alt',     # ë‹¤ìŒì£¼ ì œì•ˆ
    5: 'offer_incentive'            # ë¹„ì„ í˜¸ ì‹œê°„ëŒ€ ì¸ì„¼í‹°ë¸Œ ì œê³µ
}
```

**Reward (ë³´ìƒ)**:
```python
reward = (
    + 10 * booking_confirmed        # ì˜ˆì•½ ì„±ì‚¬
    + 5 * preferred_time_match      # ì„ í˜¸ ì‹œê°„ ë§¤ì¹­
    + 3 * alternative_accepted      # ëŒ€ì•ˆ ìˆ˜ë½
    - 2 * (waiting_time / 30)       # ëŒ€ê¸°ì‹œê°„ íŒ¨ë„í‹°
    + 2 * load_balance_score        # ë¶€í•˜ ë¶„ì‚° ì ìˆ˜
    - 5 * customer_rejected         # ê³ ê° ê±°ì ˆ (ì´íƒˆ)
)
```

#### Training vs Deployment

```
+------------------------------------------------------------------+
|  Training Phase (ì‹œë®¬ë ˆì´ì…˜)                                     |
+------------------------------------------------------------------+
|  1. ì‹œë®¬ë ˆì´ì…˜ ì„¼í„° ìƒíƒœ ìƒì„± (ê°€ìš© ì°¨ëŸ‰, ì§ì›, ì˜ˆì•½ í˜„í™©)       |
|  2. ì‹œë®¬ë ˆì´ì…˜ ê³ ê° ìš”ì²­ ìƒì„± (ì„ í˜¸ ì¼ì •, ìœ ì—°ì„±)                |
|  3. Agentê°€ ì˜ˆì•½ í™•ì • ë˜ëŠ” ëŒ€ì•ˆ ì œì‹œ                             |
|  4. ì‹œë®¬ë ˆì´ì…˜ ê³ ê°ì´ ìˆ˜ë½/ê±°ì ˆ ì‘ë‹µ                             |
|  5. Reward ê³„ì‚° ë° DQN ì—…ë°ì´íŠ¸                                  |
+------------------------------------------------------------------+
                            |
                            v í•™ìŠµëœ ëª¨ë¸ ì €ì¥
+------------------------------------------------------------------+
|  Deployment Phase (ì‹¤ì œ ìš´ì˜)                                    |
+------------------------------------------------------------------+
|  1. ì‹¤ì œ ì„¼í„° ìƒíƒœ ì¡°íšŒ (API ì—°ë™)                               |
|  2. ê³ ê°ì´ ì„ í˜¸ ì¼ì • ì„ íƒ                                        |
|  3. í•™ìŠµëœ ëª¨ë¸ì´ ìµœì  ë°°ì • ë˜ëŠ” ëŒ€ì•ˆ ì œì‹œ                       |
|  4. ì˜ˆì•½ í™•ì • ë° ì•Œë¦¼                                            |
+------------------------------------------------------------------+
```

#### Phase 2 í•™ìŠµ ê²°ê³¼

ì‹œë®¬ë ˆì´ì…˜ í•™ìŠµì„ í†µí•´ Agentê°€ ìŠ¤ìŠ¤ë¡œ í„°ë“í•˜ëŠ” ê²ƒ:

- âœ… ì–´ë–¤ ëŒ€ì•ˆì„ ì œì‹œí•´ì•¼ ê³ ê° ìˆ˜ë½ë¥ ì´ ë†’ì€ê°€
- âœ… ì„¼í„° ìì›(ì°¨ëŸ‰, ì§ì›)ì„ íš¨ìœ¨ì ìœ¼ë¡œ ë°°ë¶„í•˜ëŠ” ë°©ë²•
- âœ… ì˜ˆì•½ ë¶€í•˜ë¥¼ ê· ë“±í•˜ê²Œ ë¶„ì‚°ì‹œí‚¤ëŠ” ì „ëµ
- âœ… ê³ ê° ìœ í˜•ë³„ ìµœì ì˜ ëŒ€ì•ˆ ì œì‹œ ìˆœì„œ

#### DQN ì‹ ê²½ë§ êµ¬ì¡°

Phase 2ì—ì„œ ì‚¬ìš©í•˜ëŠ” DQN(Deep Q-Network) êµ¬ì¡°:

```
ì…ë ¥ (159ì°¨ì›) â†’ FC(256) + ReLU â†’ FC(256) + ReLU â†’ ì¶œë ¥ (6 ì•¡ì…˜)
```

**ìƒíƒœ ë²¡í„° (159ì°¨ì›)**:
| êµ¬ì„± ìš”ì†Œ | ì°¨ì› |
|-----------|------|
| ê³ ê° ì„ í˜¸ë„ | 6 |
| ìŠ¬ë¡¯ ê°€ìš©ì„± | 126 (21ì¼ Ã— 6ìŠ¬ë¡¯) |
| ì°¨ëŸ‰ ê°€ìš©ì„± | 23 |
| ë©”íƒ€ ì •ë³´ | 4 |

**í•˜ì´í¼íŒŒë¼ë¯¸í„°**:
| íŒŒë¼ë¯¸í„° | ê°’ |
|----------|-----|
| Hidden Dim | 256 |
| Learning Rate | 0.001 |
| Î³ (Discount) | 0.99 |
| Îµ-decay | 0.995 |
| Batch Size | 64 |
| Replay Buffer | 10,000 |

**í•µì‹¬ êµ¬ì„±ìš”ì†Œ**:
- **Q-Network**: ìƒíƒœ â†’ Qê°’ ì˜ˆì¸¡ (PyTorch `nn.Module`)
- **Target Network**: ì•ˆì •ì ì¸ íƒ€ê²Ÿ Qê°’ ê³„ì‚° (ì£¼ê¸°ì  ë™ê¸°í™”)
- **Experience Replay**: ìƒ˜í”Œ ê°„ ìƒê´€ê´€ê³„ ì œê±°
- **Îµ-greedy**: íƒí—˜-í™œìš© ê· í˜•

---

## ğŸ”— Phase 3: í†µí•© ì‹œìŠ¤í…œ

**Phase 3ëŠ” Phase 1(ì°¨ëŸ‰ ì¶”ì²œ)ê³¼ Phase 2(ìŠ¤ì¼€ì¤„ë§)ë¥¼ ì—°ê²°í•˜ëŠ” End-to-End íŒŒì´í”„ë¼ì¸**ì…ë‹ˆë‹¤. ê°œë³„ Phaseì—ì„œ í•™ìŠµëœ Agentë“¤ì„ í†µí•©í•˜ì—¬ ì°¨ëŸ‰ ì¶”ì²œë¶€í„° ì¼ì • ì˜ˆì•½ê¹Œì§€ ì „ì²´ í”„ë¡œì„¸ìŠ¤ë¥¼ í•˜ë‚˜ì˜ ì‹œìŠ¤í…œìœ¼ë¡œ ì²˜ë¦¬í•¨.

### Three-Phase RL System

| Phase | ëª©ì  | ì•Œê³ ë¦¬ì¦˜ | ìƒíƒœ |
|-------|------|----------|------|
| **Phase 1** | ìµœì†Œ ì§ˆë¬¸ìœ¼ë¡œ ìµœì  ì°¨ëŸ‰ ì¶”ì²œ | Q-Learning | âœ… ì™„ë£Œ |
| **Phase 2** | ê³ ê°Â·ì„¼í„° ë§Œì¡± ì¼ì • ë°°ì • | DQN | âœ… ì™„ë£Œ |
| **Phase 3** | End-to-End í†µí•© ìµœì í™” | Phase 1 + Phase 2 + Synergy | âœ… ì™„ë£Œ |

### í†µí•© ì‹œìŠ¤í…œ êµ¬ì¡°

```
ê³ ê° ì…ë ¥ â†’ Phase 1 (ì°¨ëŸ‰ ì¶”ì²œ) â†’ Phase 2 (ìŠ¤ì¼€ì¤„ë§) â†’ ì˜ˆì•½ í™•ì •
```

Phase 1ì—ì„œ ì¶”ì²œëœ ì°¨ëŸ‰ ê²°ê³¼ê°€ Phase 2ì˜ ì…ë ¥ìœ¼ë¡œ ì „ë‹¬ë˜ì–´, **ì°¨ëŸ‰ ì¶”ì²œë¶€í„° ì¼ì • ì˜ˆì•½ê¹Œì§€ í•œ ë²ˆì— ì²˜ë¦¬**í•˜ëŠ” End-to-End íŒŒì´í”„ë¼ì¸ì„.

### êµ¬í˜„ ë‚´ìš©

1. **IntegratedSystem í´ë˜ìŠ¤**
   - Phase 1 Agent (Q-Learning)ì™€ Phase 2 Agent (DQN) ì—°ê²°
   - Phase 1 ì¶”ì²œ ê²°ê³¼ë¥¼ Phase 2 ì…ë ¥ìœ¼ë¡œ ì „ë‹¬
   - ì „ì²´ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ ë° ê´€ë¦¬

2. **í†µí•© ë³´ìƒ í•¨ìˆ˜**
   ```
   Total_Reward = R1 + R2 + Synergy_Bonus

   R1 (Phase 1): ê³ ê° ë§Œì¡±ë„ + ì˜ˆì•½ ì˜í–¥ - ì§ˆë¬¸ ìˆ˜
   R2 (Phase 2): ì˜ˆì•½ ì„±ì‚¬ + ì„ í˜¸ ì‹œê°„ ë§¤ì¹­ - ëŒ€ê¸°ì‹œê°„
   Synergy_Bonus = 5 Ã— (ì¦‰ì‹œ ì˜ˆì•½ ê°€ëŠ¥) + 3 Ã— (ì¶”ì²œ-ìŠ¤ì¼€ì¤„ ë§¤ì¹­ë„)
   ```

3. **End-to-End í‰ê°€ ë©”íŠ¸ë¦­**
   - ì „ì²´ ì˜ˆì•½ ì„±ê³µë¥  (ì¶”ì²œ â†’ ìŠ¤ì¼€ì¤„ë§ â†’ í™•ì •)
   - ì´ ìƒí˜¸ì‘ìš© íšŸìˆ˜ (ì§ˆë¬¸ ìˆ˜ + ìŠ¤ì¼€ì¤„ë§ ì‹œë„)
   - ê³ ê° ë§Œì¡±ë„ ì¢…í•© ì ìˆ˜
   - ì‹œìŠ¤í…œ íš¨ìœ¨ì„± (ì²˜ë¦¬ ì‹œê°„, ë¦¬ì†ŒìŠ¤ í™œìš©)

4. **í†µí•© í•™ìŠµ ë°©ì‹**
   - ê°œë³„ í•™ìŠµ: Phase 1, Phase 2 ê°ê° ì‚¬ì „ í•™ìŠµ
   - í†µí•© ë¯¸ì„¸ì¡°ì •: Synergy Bonusë¡œ ì „ì²´ ìµœì í™”

### ì‹œë„ˆì§€ íš¨ê³¼

| í•­ëª© | ê°œë³„ ì‹¤í–‰ | Phase 3 í†µí•© ì‹¤í–‰ |
|------|-----------|-------------------|
| ë°ì´í„° íë¦„ | ìˆ˜ë™ ì—°ê²° í•„ìš” | ìë™ íŒŒì´í”„ë¼ì¸ |
| ìµœì í™” | ê° Phase ë…ë¦½ ìµœì í™” | ì „ì²´ ì‹œìŠ¤í…œ ìµœì í™” |
| ë³´ìƒ | R1, R2 ê°œë³„ ê³„ì‚° | R1 + R2 + Synergy Bonus |
| ì¶”ì²œ-ìŠ¤ì¼€ì¤„ ì—°ê³„ | ì—†ìŒ | ì¦‰ì‹œ ì˜ˆì•½ ê°€ëŠ¥ ì°¨ëŸ‰ ìš°ì„  ì¶”ì²œ |

### Phase 3 ì„±ëŠ¥ ê²°ê³¼ (ê°œì„  í›„)

**í•™ìŠµ ì¡°ê±´**: Phase 1 ì‚¬ì „í•™ìŠµ 1000 ì—í”¼ì†Œë“œ + Phase 2 ì‚¬ì „í•™ìŠµ 1000 ì—í”¼ì†Œë“œ + í†µí•© í•™ìŠµ 1000 ì—í”¼ì†Œë“œ

| ì§€í‘œ | ê¸°ì¡´ | ê°œì„  í›„ | ë³€í™” |
|------|------|---------|------|
| **ì´ ë³´ìƒ** | 23.84 | **31.98 Â± 8.52** | **+34.1%** |
| **End-to-End ì„±ê³µë¥ ** | 83.0% | **89.0%** | +6.0%p |
| **ì„ í˜¸ ì‹œê°„ ë§¤ì¹­ë¥ ** | 46.0% | 43.0% | -3.0%p |
| **ì‹œë„ˆì§€ ë³´ë„ˆìŠ¤** | 4.06 | **10.76** | **+165%** |
| **ì´ ìƒí˜¸ì‘ìš© íšŸìˆ˜** | 2.57íšŒ | 2.57íšŒ | ìœ ì§€ |

#### ë² ì´ìŠ¤ë¼ì¸ ë¹„êµ

| ë°©ì‹ | ì´ ë³´ìƒ | ì„±ê³µë¥  | ê°œì„ ìœ¨ |
|------|---------|--------|--------|
| Random | 14.5 | 76.0% | - |
| Individual (No Synergy) | 18.3 | 84.0% | +26.2% |
| Phase 3 (ê¸°ì¡´) | 23.9 | 83.0% | +64.8% |
| **Phase 3 (ê°œì„ )** | **31.98** | **89.0%** | **+120.5%** |

#### ë³´ìƒ êµ¬ì„± (ê°œì„  í›„)

| êµ¬ì„± ìš”ì†Œ | í‰ê·  ë³´ìƒ | ë¹„ìœ¨ |
|-----------|-----------|------|
| Phase 1 ë³´ìƒ | 9.84 | 30.8% |
| Phase 2 ë³´ìƒ | 11.38 | 35.6% |
| Synergy ë³´ë„ˆìŠ¤ | 10.76 | **33.6%** |

### Phase 3 ê°œì„  ì‚¬í•­ (ì‹¤ì œ ì½”ë“œì— ì ìš©ë¨)

3ê°€ì§€ ê°œì„  ë°©ë²•ì„ ì‹¤í—˜í•˜ê³  **ì‹¤ì œ ì½”ë“œì— ì ìš©**í•¨:

| ì‹¤í—˜ | ë°©ë²• | ì´ ë³´ìƒ | ê°œì„ ìœ¨ | ì ìš© |
|------|------|---------|--------|------|
| ê¸°ì¤€ì„  | ê¸°ì¡´ Phase 3 | 23.86 | - | - |
| ì‹¤í—˜ 1 | í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹ | 24.80 | +3.9% | âœ… |
| ì‹¤í—˜ 2 | ì •êµí•œ ì‹œë„ˆì§€ ë³´ë„ˆìŠ¤ | 30.54 | +28.1% | âœ… |
| **ì‹¤í—˜ 3** | **ê°€ìš©ì„± ì •ë³´ í™œìš©** | **31.98** | **+34.1%** | âœ… |

**ì ìš©ëœ ê°œì„  ì‚¬í•­**:
1. **í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹**: ì—í”¼ì†Œë“œ ìˆ˜ ì¦ê°€ (1000), DQN hidden_dim 256
2. **ê°œì„ ëœ ì‹œë„ˆì§€ ë³´ë„ˆìŠ¤**: ì—°ì†ì  ë³´ìƒ ì²´ê³„ (ìµœëŒ€ 17.5ì )
3. **ê°€ìš©ì„± ì •ë³´ í™œìš©**: Phase 1ì—ì„œ ê°€ìš© ì°¨ëŸ‰ ì¶”ì²œ ì‹œ ë³´ë„ˆìŠ¤ (+2ì )

**ìµœì¢… ì„±ëŠ¥**: Random ë² ì´ìŠ¤ë¼ì¸ ëŒ€ë¹„ **+120.5%** ê°œì„ 

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

- **Python** 3.12+
- **Gymnasium** (OpenAI Gym)
- **PyTorch** (DQN)
- **NumPy, Pandas, Matplotlib, Seaborn**

---

## ğŸ“Š í‰ê°€ ì§€í‘œ

| Phase | ì§€í‘œ | ì„¤ëª… |
|-------|------|------|
| Phase 1 | ì¶”ì²œ ì •í™•ë„ | ê³ ê° ì„ í˜¸ë„ì™€ ì¶”ì²œ ì°¨ëŸ‰ ë§¤ì¹­ ì ìˆ˜ |
| Phase 1 | ì§ˆë¬¸ íš¨ìœ¨ì„± | í‰ê·  ì§ˆë¬¸ ìˆ˜ |
| Phase 2 | ì˜ˆì•½ ì„±ì‚¬ìœ¨ | ì˜ˆì•½ ì™„ë£Œ / ì „ì²´ ìš”ì²­ |
| Phase 2 | ëŒ€ì•ˆ ìˆ˜ë½ë¥  | ëŒ€ì•ˆ ìˆ˜ë½ / ëŒ€ì•ˆ ì œì‹œ |
| Phase 2 | ì„ í˜¸ ì‹œê°„ ë§¤ì¹­ë¥  | 1ìˆœìœ„ ì‹œê°„ ë°°ì • ë¹„ìœ¨ |
| Phase 2 | ë¶€í•˜ ë¶„ì‚° ì ìˆ˜ | ì‹œê°„ëŒ€ë³„ ì˜ˆì•½ ê· ë“±ë„ |
| í†µí•© | Total Reward | Episodeë‹¹ ëˆ„ì  ë³´ìƒ |

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### ì±—ë´‡ ì‹¤í–‰ (ê¶Œì¥)

```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
uv sync

# ëŒ€í™”í˜• ì¶”ì²œ ì±—ë´‡ ì‹¤í–‰
uv run streamlit run src/app/main.py
```

ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:8501` ì ‘ì†í•˜ì—¬ ì‚¬ìš©.

> ğŸ“– Phase ë³„ í•™ìŠµ/í‰ê°€ ëª…ë ¹ì–´ëŠ” [ì‹¤í–‰ ê°€ì´ë“œ](./docs/EXECUTION_GUIDE.md) ì°¸ì¡°

---

## ğŸ“… ë¡œë“œë§µ

ìƒì„¸ êµ¬í˜„ ì¼ì •ì€ [ROADMAP.md](./docs/ROADMAP.md) ì°¸ì¡°.

---

## ğŸ¯ ëª©í‘œ ì„±ê³¼

### Phase 1 (ì°¨ëŸ‰ ì¶”ì²œ)
- [x] ì‹œìŠ¹ ì°¨ëŸ‰ ì¶”ì²œ ì •í™•ë„ 80% ì´ìƒ
- [x] í‰ê·  ì§ˆë¬¸ ìˆ˜ 4ê°œ (í•„ìˆ˜)
- [x] ë² ì´ìŠ¤ë¼ì¸(Random, Rule-based) ëŒ€ë¹„ 15% ì´ìƒ ì„±ëŠ¥ í–¥ìƒ

### Phase 2 (ìŠ¤ì¼€ì¤„ë§)
- [x] ì˜ˆì•½ ì„±ì‚¬ìœ¨ 80% ì´ìƒ (ë‹¬ì„±: 81%)
- [ ] ëŒ€ì•ˆ ìˆ˜ë½ë¥  70% ì´ìƒ
- [ ] ì„ í˜¸ ì‹œê°„ ë§¤ì¹­ë¥  60% ì´ìƒ
- [x] ë² ì´ìŠ¤ë¼ì¸(Random) ëŒ€ë¹„ 20% ì„±ëŠ¥ í–¥ìƒ (ë‹¬ì„±: 23.7%)

### Phase 3 (í†µí•© ì‹œìŠ¤í…œ)
- [x] ì „ì²´ ì˜ˆì•½ ì„±ê³µë¥  75% ì´ìƒ (ë‹¬ì„±: **89.0%**)
- [x] ì´ ìƒí˜¸ì‘ìš© íšŸìˆ˜ 5íšŒ ì´í•˜ (ë‹¬ì„±: **2.57íšŒ**)
- [x] ê°œë³„ Phase ëŒ€ë¹„ Synergy Bonus 10% ì´ìƒ (ë‹¬ì„±: **33.6%**)
- [x] Random ë² ì´ìŠ¤ë¼ì¸ ëŒ€ë¹„ 20% ì´ìƒ ì„±ëŠ¥ í–¥ìƒ (ë‹¬ì„±: **+120.5%**)

---

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
driving-test/
â”œâ”€â”€ README.md
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ vehicles.json           # ì°¨ëŸ‰ DB (23ì¢…)
â”‚   â”œâ”€â”€ questions.json          # ì§ˆë¬¸ ëª©ë¡ (8ê°œ)
â”‚   â”œâ”€â”€ centers.json            # ì„¼í„° DB
â”‚   â””â”€â”€ customer_profiles.json  # ìƒ˜í”Œ ê³ ê° ë°ì´í„°
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ streamlit_app.py           # Streamlit Cloud ì§„ì…ì 
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â””â”€â”€ main.py                # ì±—ë´‡ ë©”ì¸ ì•±
â”‚   â”œâ”€â”€ env/
â”‚   â”‚   â”œâ”€â”€ recommendation_env.py  # Phase 1 í™˜ê²½
â”‚   â”‚   â””â”€â”€ scheduling_env.py      # Phase 2 í™˜ê²½
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ q_learning_agent.py    # Phase 1 Agent
â”‚   â”‚   â””â”€â”€ scheduling_agent.py    # Phase 2 Agent (DQN)
â”‚   â”œâ”€â”€ baselines/
â”‚   â”‚   â”œâ”€â”€ random_baseline.py
â”‚   â”‚   â”œâ”€â”€ rule_based.py
â”‚   â”‚   â””â”€â”€ scheduling_baselines.py
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ customer_generator.py
â”‚   â”œâ”€â”€ visualization/
â”‚   â”‚   â”œâ”€â”€ plot_phase1_results.py # Phase 1 ì‹œê°í™”
â”‚   â”‚   â””â”€â”€ plot_phase3.py         # Phase 3 ì‹œê°í™”
â”‚   â”œâ”€â”€ train_phase1.py            # Phase 1 í•™ìŠµ
â”‚   â”œâ”€â”€ train_phase2.py            # Phase 2 í•™ìŠµ
â”‚   â”œâ”€â”€ evaluate_phase1.py         # Phase 1 í‰ê°€ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ integrated_system.py       # Phase 3 í†µí•© ì‹œìŠ¤í…œ
â”‚   â”œâ”€â”€ train_phase3.py            # Phase 3 í•™ìŠµ
â”‚   â””â”€â”€ evaluate_phase3.py         # Phase 3 í‰ê°€
â”œâ”€â”€ checkpoints/                   # í•™ìŠµëœ ëª¨ë¸ ì €ì¥
â”‚   â”œâ”€â”€ standalone/                # ë…ë¦½ ì‹¤í–‰ìš© ëª¨ë¸
â”‚   â”‚   â””â”€â”€ q_learning_model.json  # Phase 1 Q-Learning ëª¨ë¸
â”‚   â”œâ”€â”€ chatbot/                   # ì±—ë´‡ ì•±ìš© ëª¨ë¸
â”‚   â”‚   â””â”€â”€ chatbot_q_learning.json
â”‚   â””â”€â”€ dqn_scheduling.pth         # Phase 2 DQN ëª¨ë¸
â”œâ”€â”€ results/                       # ì‹¤í—˜ ê²°ê³¼
â”‚   â”œâ”€â”€ phase3_results.json        # Phase 3 ê²°ê³¼ ë°ì´í„°
â”‚   â””â”€â”€ figures/                   # ì‹œê°í™” ê²°ê³¼
â”‚       â”œâ”€â”€ phase3_learning_curves.png
â”‚       â”œâ”€â”€ phase3_performance_comparison.png
â”‚       â”œâ”€â”€ phase3_synergy_analysis.png
â”‚       â””â”€â”€ phase3_detailed_metrics.png
â”œâ”€â”€ docs/                          # ë¬¸ì„œ
â”‚   â”œâ”€â”€ MDP_DESIGN.md              # ìƒì„¸ MDP ì„¤ê³„
â”‚   â”œâ”€â”€ ROADMAP.md                 # êµ¬í˜„ ë¡œë“œë§µ
â”‚   â”œâ”€â”€ PERFORMANCE_RESULTS.md     # ì„±ëŠ¥ í‰ê°€ ê²°ê³¼
â”‚   â””â”€â”€ chat/                      # ì±—ë´‡ ìŠ¤í¬ë¦°ìƒ·
â””â”€â”€ resource/
    â”œâ”€â”€ image/brand/               # ë¸Œëœë“œë³„ ì‹œìŠ¹ ì˜ˆì•½ í™”ë©´ ìº¡ì²˜
    â””â”€â”€ styles/                    # Streamlit ì•± ìŠ¤íƒ€ì¼
```

---

## ğŸ“– ì°¸ê³  ìë£Œ

### í•µì‹¬ ë…¼ë¬¸

- Hu, H., Wu, X., Luo, B., Tao, C., Xu, C., Wu, W., & Chen, Z. (2018). **Playing 20 Question Game with Policy-Based Reinforcement Learning**. *EMNLP 2018*. [arXiv:1808.07645](https://arxiv.org/abs/1808.07645)

### ê¸°ìˆ  ë¬¸ì„œ

- [Gymnasium Documentation](https://gymnasium.farama.org)
- [Spinning Up in Deep RL](https://spinningup.openai.com)
